<!DOCTYPE html>
<html>
	<head>
		<title>Elijah Hauber's Works</title>
		<!-- link to main stylesheet -->
		<link rel="stylesheet" type="text/css" href="/css/main.css?1585695515890267400">
		<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-100709643-1', 'auto');
  ga('send', 'pageview');

</script>

		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
		<script>
			(adsbygoogle = window.adsbygoogle || []).push({
			google_ad_client: "ca-pub-1717785919257585",
			enable_page_level_ads: true
			});
		</script>
	</head>
	<body>
		<div class="vh-100 flex-column">
			<header>
				<nav>
					<ul>
						<li id="logo"><a href="/">Home</a></li>
						<li><a href="/about">About</a></li>
						<li><a href="/works">Works</a></li>
						<li><a href="/blog">Blog</a></li>
						<li> <a href="/space">Space <small>(Experimental)</small></a></li>
					</ul>
				</nav>
			</header>
			<div class="flex-column content-container">
				<script>
window.onload = function() {
	let myCanvas = document.getElementById('myCanvas');
	let context = myCanvas.getContext('2d');

	// context.rotate(40 * Math.PI / 180);
	let image_w = canvas.width;
	let image_h = canvas.height;

	let image_data = context.createImageData(image_w, image_h); // RGBA

    // Pan and zoom parameters
    let offsetx = -image_w/2;
    let offsety = -image_h/2;
    let panx = -100;
    let pany = 0;
    let zoom = 150;
	
	function checkIfBelongsToMandelbrotSet(x, y, iterations) {
	// 	let realComponentOfResult = x;
	// 	let imaginaryComponentOfResult = y;
	
	// 	for(let i = 0; i < iterations; i++) {
	// 		// Calculate the real and imaginary components of the result
	// 		// separately
	// 		let tempRealComponent = realComponentOfResult * realComponentOfResult
	// 								- imaginaryComponentOfResult * imaginaryComponentOfResult
	// 								+ x;
	
	// 		let tempImaginaryComponent = 2 * realComponentOfResult * imaginaryComponentOfResult
	// 								+ y;
	
	// 		realComponentOfResult = tempRealComponent;
	// 		imaginaryComponentOfResult = tempImaginaryComponent;
	// 		if (realComponentOfResult * imaginaryComponentOfResult > 99999)
	// 			return (i/iterations * 100) //  not In the Mandelbrot set
	// 	}
	
	// 	return 0; // not Not in the set (return 0 if in the set)
	// }
	
	// function drawMandleBrot(magnificationFactor, panX, panY, iterations) {
	// 	for(let x=0; x < myCanvas.width; x++) {
	// 		for(let y=0; y < myCanvas.height; y++) {
	// 			let belongsToSet =
	// 					checkIfBelongsToMandelbrotSet(x/magnificationFactor - panX,
	// 												y/magnificationFactor - panY,
	// 												iterations);
	// 			if(belongsToSet === 0) {
	// 					context.fillStyle = '#fbdc75';
	// 					context.fillRect(x,y, 1,1); // Draw a yellow pixel
	// 			} else {
	// 				context.fillStyle = 'hsl(261, 80%, ' + Math.abs(belongsToSet - 100) + '%)';
	// 				context.fillRect(x,y, 1,1); // Draw a colorful pixel
	// 			}             
	// 		}
	// 	}
	// }

    function generateImage() {
        // Iterate over the pixels
        for (let y=0; y<image_h; y++) {
            for (let x=0; x<image_w; x++) {
                iterate(x, y, maxiterations);
            }
        }
    }
	
	// drawMandleBrot(200, 2, 1.5, 100);
 
    // Calculate the color of a specific pixel
    function iterate(x, y, maxiterations) {
        // Convert the screen coordinate to a fractal coordinate
        let x0 = (x + offsetx + panx) / zoom;
        let y0 = (y + offsety + pany) / zoom;
 
        // Iteration letiables
        let a = 0;
        let b = 0;
        let rx = 0;
        let ry = 0;
 
        // Iterate
        let iterations = 0;
        while (iterations < maxiterations && (rx * rx + ry * ry <= 4)) {
            rx = a * a - b * b + x0;
            ry = 2 * a * b + y0;
 
            // Next iteration
            a = rx;
            b = ry;
            iterations++;
        }
 
        // Get palette color based on the number of iterations
        let color;
        if (iterations == maxiterations) {
            color = { r:0, g:0, b:0}; // Black
        } else {
            let index = Math.floor((iterations / (maxiterations-1)) * 255);
            color = palette[index];
        }
 
        // Apply the color
        let pixelindex = (y * image_w + x) * 4;
        imagedata.data[pixelindex] = color.r;
        imagedata.data[pixelindex+1] = color.g;
        imagedata.data[pixelindex+2] = color.b;
        imagedata.data[pixelindex+3] = 255;
    }

	let slideMag = document.getElementById('slideMag');
	let divMag = document.getElementById('sliderAmountMag');
	let slidePanX = document.getElementById('slidePanX');
	let divPanX = document.getElementById('sliderAmountPanX');
	let slidePanY = document.getElementById('slidePanY');
	let divPanY = document.getElementById('sliderAmountPanY');
	let slideIterations = document.getElementById('slideIterations');
	let divIterations = document.getElementById('sliderAmountIterations');

	function changeOnSlide() {
		context.clearRect(0, 0, 300, 300); // clear canvas
		drawMandleBrot(divMag.innerHTML, divPanX.innerHTML, divPanY.innerHTML, divIterations.innerHTML)
	}

	function magShowVal() {
		divMag.innerHTML = this.value;
		context.scale(this.value, this.value);
	}
	slideMag.addEventListener('input', magShowVal);

	function panXShowVal() {
		divPanX.innerHTML = this.value;
	}
	slidePanX.addEventListener('input', panXShowVal);

	function panYShowVal() {
		divPanY.innerHTML = this.value;
	}
	slidePanY.addEventListener('input', panYShowVal);

	function iterationsShowVal() {
		divIterations.innerHTML = this.value;
	}
	slideIterations.addEventListener('input', iterationsShowVal);

}	
</script>

<h1>Elijah Hauber's Works</h1>
<canvas id="myCanvas" width="600" height="600"></canvas>
<input class="slider" type="range" id="slideMag" min="1" max="400" step="1" value="200">
<div id="sliderAmountMag">200</div>​

<input class="slider" type="range" id="slidePanX" min="1" max="3" step=".25" value="2">
<div id="sliderAmountPanX">2</div>​

<input class="slider" type="range" id="slidePanY" min="1" max="3" step=".25" value="1.5">
<div id="sliderAmountPanY">1.5</div>​

<input class="slider" type="range" id="slideIterations" min="1" max="300" step="1" value="100">
<div id="sliderAmountIterations">100</div>​

			</div><!-- /.container -->
			<footer>
				<ul>
					<li><a href="https://github.com/ethauber" target="_blank">github.com/ethauber</a></li>
				</ul>
			</footer>
		</div>
	</body>
</html>
